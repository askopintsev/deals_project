# Deals project

## Установка сервиса
Для того, чтобы осуществить запуск сервиса необходимо:
- перейти в директорию проекта deals_project
- открыть командную строку
- ввести команду: docker-compose up
- при успешном развертывании сервиса, API будет доступен по следующимм эндпоинтам:
   - http://0.0.0.0:8000/upload
   - http://0.0.0.0:8000/results

## Функционал сервиса
Сервис предоставляет следующие возможности:
- загрузка типовых файлов deals.csv
- отображение топ-5 пользователей, потративших наибольшую сумму за весь период

### Загрузка файла
Для того, чтобы осуществить загрузку типового файла в базу данных сервиса необходимо:
- обратиться по эндпоинту http://0.0.0.0:8000/upload
- в теле запроса передать файл c учетом требований:
   - расширение файла csv
   - заголовок файла должен иметь поля: customer, item, total, quantity, date
   - тип данных для полей: customer - строковое значение, 
    item - строковое значение, total - числовое значение, quantity - числовое значение, 
    date - формат даты гггг-мм-дд чч:мм:сс.мкс
- в результате успешной загрузки, сервис вернент ответ: 'Status: OK'

### Запрос топ-5 пользователей
Для того, чтобы запросить топ-5 пользователей, потративших наибольшую сумму за весь период необходимо:
- обратиться по эндпоинту http://0.0.0.0:8000/results
- в результате успешного запроса, сервис вернет список пользователей, которые описываются следующими полями:
   - username - логин клиента
   - spent_money - сумма потраченных средств за весь период
   - gems - список из названий камней, которые купили как минимум двое из списка "5 клиентов, 
   потративших наибольшую сумму за весь период", и данный клиент является одним из этих покупателей
